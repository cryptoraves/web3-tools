<template>
  <div class="container">
    <div>
      <h1 class="title">
        Manager Contract
      </h1>
      <h2 class="subtitle">
        Fundamental Manager Operations
      </h2>
      <div class="links">
        <br>
        <a
          target="_blank" 
          @click="goEtherscan(ethereumAddress)">
          Wallet Address: {{ this.ethereumAddress }}
        </a>
        <br>Fake Twitter ID: {{ this.twitterId }}
        <div
          v-if="!managerContractAddress && !showLoading" 
          class="links">
          <a
            @click="launchManagerContract()"
            class="button--green"
          >
            Launch Manager Contract
          </a>
        </div>
         <div
          v-if="managerContractAddress && !showLoading" 
          class="links">
          <a
            target="_blank"
            @click="goEtherscan(managerContractAddress)">
            Manager Contract Address: {{ this.managerContractAddress }}
          </a>
          <br>
          </div>
          <div
          v-if="cryptoravesTokenContractAddress && !showLoading" 
          class="links">
          <a
            target="_blank"
            @click="goEtherscan(cryptoravesTokenContractAddress)">
            Cryptoraves Token Contract Address: {{ this.cryptoravesTokenContractAddress }}
          </a>
          <br>
          </div>
        </div>
        
        <div
          v-if="managerContractAddress && !showLoading && !minted" 
          class="links">
          <a
            @click="dropMyCrypto()"
            class="button--green"
          >
            Drop Crypto
          </a>
        </div> 
        <form v-if="minted && !showLoading" name="send" action="" method="post">
          <br><br>
          <label for="amount">
            Amount:
          </label>
          <input v-model="amount" />
          <br><br>    
          <div 
            class="links">
            <a
              @click="sendToken()"
              class="button--green"
            >
              Send {{this.amount}} of {{ this.tokenId }} tokens to random recipient.
            </a>
          </div>    
        </form>

        <div
          v-if="managerContractAddress && !showLoading" 
          class="links">
          <a
            @click="depositERC20()"
            class="button--green"
          >
            Deposit ERC20
          </a>
          <a
            @click="depositERC721()"
            class="button--green"
          >
            Deposit ERC721
          </a>
        </div>      
         <div
          v-if="ERC1155tokenId && !showLoading" 
          class="links">
          <a
            @click="withdrawERC20()"
            class="button--green"
          >
            Withdraw ERC20
          </a>
          <a
            @click="withdrawERC721()"
            class="button--green"
          >
            Withdraw ERC721
          </a>
        </div> 
        <div
          v-if="showLoading"
        >
          <img 
            src="../assets/gif/loading.gif" 
            alt >
        </div>
        <div 
            v-if="managerContractAddress"
            class="links">
            <br>
            <br>
            <a
              @click="resetLocalStorage()"
              class="button--green"
            >
              Start From Scratch
            </a>
        </div>
      </div>
    </div>
  </div>
</template>

<script>
import MetamaskHandler from "./metamaskHandler"
export default {
  extends: MetamaskHandler,
  components: {},
  data() {
    return {
      ethereumAddress: null
    }
  },

  async mounted() {
    
    if (localStorage.cryptoravesTokenContractAddress) this.cryptoravesTokenContractAddress = localStorage.cryptoravesTokenContractAddress
    if (localStorage.managerContractAddress) this.managerContractAddress = localStorage.managerContractAddress
    if (localStorage.launchedWalletAddress) this.launchedWalletAddress = localStorage.launchedWalletAddress
    if (localStorage.managerContractMinted) this.minted = localStorage.managerContractMinted 
    if (localStorage.managedContractRecipientAddress) this.recipientAddress = localStorage.managedContractRecipientAddress 
    if (localStorage.tokenId) this.tokenId = localStorage.ERC1155tokenId
    if (localStorage.ERC1155tokenId) this.ERC1155tokenId = localStorage.ERC1155tokenId

    if (localStorage.twitterId) {
      this.twitterId = localStorage.twitterId
    } else {
      this.twitterId = localStorage.twitterId = Math.round(Math.random() * 1000000000)
    }
    if (localStorage.recipientTwitterId) {
      this.recipientTwitterId = localStorage.recipientTwitterId
    } else {
      this.recipientTwitterId = localStorage.recipientTwitterId = Math.round(Math.random() * 1000000000)
    }
    
  },
  methods: {
    async launchManagerContract(){

      let factory = new this.ethers.ContractFactory(this.abi, this.bytecode, this.signer);

      //URI goes in here in place of ''
      let contract = await factory.deploy('https://i.picsum.photos/id/99/200/200.jpg', '0x0000000000000000000000000000000000000000');

      this.showLoading = true
      await contract.deployed()
      this.showLoading = false
      
      this.managerContractAddress = localStorage.managerContractAddress = contract.address
      this.cryptoravesTokenContractAddress = localStorage.cryptoravesTokenContractAddress = await contract.getCryptoravesTokenAddress()
      //console.log(contract.deployTransaction.hash);
    },
    async dropMyCrypto(){

      let tokenManager = new this.ethers.Contract(
        this.managerContractAddress, 
        this.abi, 
        this.signer
      )
      this.showLoading = true
      let tx = await tokenManager.initCryptoDrop(this.twitterId, '@fakeHandle', 'https://i.picsum.photos/id/'+this.tokenId+'/200/200.jpg')
      let val = await tx.wait()
      this.showLoading = false

      this.launchedWalletAddress = localStorage.launchedWalletAddress = val.events[1].args['_address']

      this.showLoading = true

      this.minted = localStorage.managerContractMinted = true

      this.tokenId = localStorage.ERC1155tokenId = await tokenManager.getTokenIdFromPlatformId(this.twitterId)

      let cryptoravesToken = new this.ethers.Contract(this.cryptoravesTokenContractAddress, this.cryptoravesTokenAbi, this.signer)

      //Verifies that new wallet has approved the manager contract to perform transactions on its behalf
      tx = await cryptoravesToken.isApprovedForAll(this.launchedWalletAddress, this.managerContractAddress)
      this.showLoading = false

      console.log(tx)
    },
    async sendToken(){

      let tokenManager = new this.ethers.Contract(this.managerContractAddress, this.abi, this.signer)

      let cryptoravesToken = new this.ethers.Contract(this.cryptoravesTokenContractAddress, this.cryptoravesTokenAbi, this.signer)

      let amount1 = await cryptoravesToken.balanceOf(this.launchedWalletAddress, this.tokenId)
      
      console.log('Balance #1: ', this.launchedWalletAddress, this.ethers.utils.formatUnits(amount1, this.decimals))
      if (this.recipientAddress){
        let amount2 = await cryptoravesToken.balanceOf(this.recipientAddress, this.tokenId)
        console.log('Balance #2: ', this.recipientAddress, this.ethers.utils.formatUnits(amount2, this.decimals))
      }
      
      let randomRecipientTwitterId = Math.round(Math.random() * 1000000000)
      let twitterIds = [this.twitterId.toString(), randomRecipientTwitterId.toString(), '0']
      let twitterNames = ['@fakeHandle', '@randomFake2', '']
      let tx = await tokenManager.initCommand(
        twitterIds, twitterNames, '', false, 
        this.ethers.utils.parseEther(this.amount.toString()), 
        this.ethers.utils.formatBytes32String(this.data)
      )
      this.showLoading = true
      let val = await tx.wait()
      this.showLoading = false
      amount1 = await cryptoravesToken.balanceOf(this.launchedWalletAddress, this.tokenId)

      this.recipientAddress = this.managedContractRecipientAddress = await tokenManager.getUserAccount(randomRecipientTwitterId);
      console.log(this.recipientAddress)
      console.log('Balance #1: ', this.launchedWalletAddress, this.ethers.utils.formatUnits(amount1, this.decimals))
      
      amount1 = await cryptoravesToken.balanceOf(this.recipientAddress, this.tokenId)
      console.log('Balance #2: ', this.recipientAddress, this.ethers.utils.formatUnits(amount1, this.decimals))
    },
    resetLocalStorage(){
      localStorage.removeItem('managerContractAddress')
      localStorage.removeItem('launchedWalletAddress')
      localStorage.removeItem('managerContractMinted')
      localStorage.removeItem('managedContractRecipientAddress')
      localStorage.removeItem('twitterId')
      localStorage.removeItem('ERC1155tokenId')
      localStorage.removeItem('recipientTwitterId')
      localStorage.removeItem('cryptoravesTokenContractAddress')
      location.reload()
    },
    goEtherscan(param){
      if (param.length == 42){
        window.open('https://rinkeby.etherscan.io/address/'+param)
      }else{
        window.open('https://rinkeby.etherscan.io/tx/'+param)
      }
    },
    async depositERC20(){

      if (!localStorage.ERC20launchAddress){
        alert('Go to ERC20 Factory and launch an ERC20 token')
      }

      let abi = [
        'function balanceOf(address who) external view returns (uint256)',
        'function approve(address spender, uint256 amount) external returns (bool)'
      ]

      let token = new this.ethers.Contract(localStorage.ERC20launchAddress, abi, this.signer)
      let amount1 = await token.balanceOf(this.ethereumAddress)
      
      console.log('ERC20 Amount before deposit: '+this.ethers.utils.formatUnits(amount1, this.decimals))

      let tokenManager = new this.ethers.Contract(
        this.managerContractAddress, 
        this.abi, 
        this.signer
      )
      this.showLoading = true

      let appr = await token.approve(this.managerContractAddress, this.ethers.utils.parseEther(this.amount.toString()).toString());
      await appr.wait()

      let tx = await tokenManager.depositERC20(
        this.ethers.utils.parseEther(this.amount.toString()).toString(),
        localStorage.ERC20launchAddress
      )
      let val = await tx.wait()
      this.showLoading = false

      amount1 = await token.balanceOf(this.ethereumAddress)
      console.log('ERC20 Amount After deposit: '+this.ethers.utils.formatUnits(amount1, this.decimals))

      this.ERC1155tokenId = localStorage.ERC1155tokenId = val.events[val.events.length - 1].args[3].toString()

      let cryptoravesToken = new this.ethers.Contract(this.cryptoravesTokenContractAddress, this.cryptoravesTokenAbi, this.signer)

      amount1 = await cryptoravesToken.balanceOf(this.ethereumAddress, this.ERC1155tokenId)
      console.log('ERC1155 Wrapped amount received: '+this.ethers.utils.formatUnits(amount1, this.decimals))
    },
    async withdrawERC20(){
      let abi = [
        'function balanceOf(address who) external view returns (uint256)',
        'function approve(address spender, uint256 amount) external returns (bool)'
      ]

      let token = new this.ethers.Contract(localStorage.ERC20launchAddress, abi, this.signer)
      let amount1 = await token.balanceOf(this.ethereumAddress)
      
      console.log('ERC20 Amount before withdrawal: '+this.ethers.utils.formatUnits(amount1, this.decimals))

      let tokenManager = new this.ethers.Contract(
        this.managerContractAddress, 
        this.abi, 
        this.signer
      )

      this.showLoading = true
      let tx = await tokenManager.withdrawERC20(
        this.ethers.utils.parseEther(this.amount.toString()).toString(),
        localStorage.ERC20launchAddress
      )
      let val = await tx.wait()
      this.showLoading = false

      amount1 = await token.balanceOf(this.ethereumAddress)
      console.log('ERC20 Amount After withdrawal: '+this.ethers.utils.formatUnits(amount1, this.decimals))

      let cryptoravesToken = new this.ethers.Contract(this.cryptoravesTokenContractAddress, this.cryptoravesTokenAbi, this.signer)

      amount1 = await cryptoravesToken.balanceOf(this.ethereumAddress, this.ERC1155tokenId)
      console.log('ERC1155 Wrapped amount remaining: '+this.ethers.utils.formatUnits(amount1, this.decimals))
    },
    async depositERC721(){

      if (!localStorage.ERC721launchAddress){
        alert('Go to ERC721 Factory and launch an ERC721 token')
      }

      let abi = [
        'function balanceOf(address who) external view returns (uint256)',
        'function approve(address spender, uint256 amount) external returns (bool)'
      ]

      let token = new this.ethers.Contract(localStorage.ERC721launchAddress, abi, this.signer)
      let amount1 = await token.balanceOf(this.ethereumAddress)
      
      console.log('ERC721 Amount before deposit: '+amount1)

      let tokenManager = new this.ethers.Contract(
        this.managerContractAddress, 
        this.abi, 
        this.signer
      )
      this.showLoading = true

      let appr = await token.approve(this.managerContractAddress, amount1 - 1);
      await appr.wait()

      let tx = await tokenManager.depositERC721(
        amount1 - 1,
        localStorage.ERC721launchAddress
      )
      let val = await tx.wait()
      this.showLoading = false
      console.log(val)
      amount1 = await token.balanceOf(this.ethereumAddress)
      console.log('ERC721 Amount After deposit: '+amount1)

      localStorage.ERC721TokenId--

      this.ERC1155tokenId = localStorage.ERC1155tokenId = val.events[val.events.length - 1].args[3].toString()

      let cryptoravesToken = new this.ethers.Contract(this.cryptoravesTokenContractAddress, this.cryptoravesTokenAbi, this.signer)

      amount1 = await cryptoravesToken.balanceOf(this.ethereumAddress, this.ERC1155tokenId)
      console.log('ERC1155 Wrapped tokens held: '+amount1)
    },
    async withdrawERC721(){
      let abi = [
        'function balanceOf(address who) external view returns (uint256)',
        'function approve(address spender, uint256 amount) external returns (bool)'
      ]

      let token = new this.ethers.Contract(localStorage.ERC721launchAddress, abi, this.signer)
      let amount1 = await token.balanceOf(this.ethereumAddress)
      
      console.log('ERC721 Amount before withdrawal: '+amount1)

      let tokenManager = new this.ethers.Contract(
        this.managerContractAddress, 
        this.abi, 
        this.signer
      )

      this.showLoading = true
      let tx = await tokenManager.withdrawERC721(
        '1',
        localStorage.ERC721launchAddress
      )
      let val = await tx.wait()
      this.showLoading = false

      amount1 = await token.balanceOf(this.ethereumAddress)
      console.log('ERC721 Amount After withdrawal: '+amount1)

      let cryptoravesToken = new this.ethers.Contract(this.cryptoravesTokenContractAddress, this.cryptoravesTokenAbi, this.signer)

      amount1 = await cryptoravesToken.balanceOf(this.ethereumAddress, this.ERC1155tokenId)
      console.log('ERC1155 Wrapped amount remaining: '+amount1)
    }
  },
  data() {
    return {
      managerContractAddress: null,
      cryptoravesTokenContractAddress: null,
      launchedWalletAddress: null,
      recipientAddress: null,
      showLoading: false,
      decimals: 18,
      data: '',
      minted: false,
      tokenId: 0,
      amount: 100,
      twitterId: null,
      recipientTwitterId: null,
      ERC1155tokenId: null,
      cryptoravesTokenAbi: [
        'function balanceOf(address account, uint256 id) external view returns (uint256)',
        'function setApprovalForAll(address operator, bool approved) external',
        'function isApprovedForAll(address account, address operator) external view returns (bool)',
        'function safeTransferFrom(address from, address to, uint256 id, uint256 amount, bytes data) external'
      ],
      bytecode: '60806040526b033b2e3c9fd0803ce80000006005553480156200002157600080fd5b506040516200600438038062006004833981016040819052620000449162000109565b60028054336001600160a01b031991821681179092556003805490911690911790556001600160a01b038116620000d7576000826040516200008690620000fb565b620000929190620001c4565b604051809103906000f080158015620000af573d6000803e3d6000fd5b50600480546001600160a01b0319166001600160a01b039290921691909117905550620000f3565b600480546001600160a01b0319166001600160a01b0383161790555b505062000245565b61384380620027c183390190565b600080604083850312156200011c578182fd5b82516001600160401b038082111562000133578384fd5b81850186601f82011262000145578485fd5b805192508183111562000156578485fd5b604051601f8401601f19168101602001838111828210171562000177578687fd5b6040528381528184016020018810156200018f578586fd5b620001a2846020830160208501620001f9565b809550505050506020830151620001b9816200022c565b809150509250929050565b6000602082528251806020840152620001e5816040850160208701620001f9565b601f01601f19169190910160400192915050565b60005b8381101562000216578181015183820152602001620001fc565b8381111562000226576000848401525b50505050565b6001600160a01b03811681146200024257600080fd5b50565b61256c80620002556000396000f3fe608060405260043610620000f25760003560e01c80633fc74db2116200008b578063c20938e01162000061578063c20938e0146200028d578063c8ac654214620002a4578063cc7a59d214620002bb578063fdc6118114620002e057620000f2565b80633fc74db2146200022c5780635251d91c1462000251578063865097c7146200027657620000f2565b80632ee6b3de11620000cd5780632ee6b3de1462000180578063365b98b214620001b4578063392d661c14620001ee5780633e3589b8146200020757620000f2565b80631a679a4f14620000f7578063260992d314620001275780632b956ff7146200015b575b600080fd5b3480156200010457600080fd5b506200010f62000305565b6040516200011e919062001a14565b60405180910390f35b3480156200013457600080fd5b506200014c62000146366004620018f3565b62000315565b6040516200011e919062001cc8565b3480156200016857600080fd5b506200014c6200017a366004620017c5565b620003b0565b3480156200018d57600080fd5b50620001a56200019f36600462001803565b620003cb565b6040516200011e919062001b3a565b348015620001c157600080fd5b50620001d9620001d3366004620018f3565b6200081b565b6040516200011e979695949392919062001ac0565b62000205620001ff36600462001925565b62000988565b005b3480156200021457600080fd5b506200010f6200022636600462001957565b62000c0f565b3480156200023957600080fd5b506200010f6200024b36600462001957565b62000e4b565b3480156200025e57600080fd5b506200014c62000270366004620017c5565b62001050565b620002056200028736600462001925565b62001062565b620002056200029e36600462001925565b620011f1565b62000205620002b536600462001925565b62001226565b348015620002c857600080fd5b506200010f620002da36600462001957565b6200125b565b348015620002ed57600080fd5b506200010f620002ff366004620018f3565b6200140d565b6004546001600160a01b03165b90565b6004546000906001600160a01b03168063b60df18462000335856200140d565b6040518263ffffffff1660e01b815260040162000353919062001a14565b60206040518083038186803b1580156200036c57600080fd5b505afa15801562000381573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190620003a791906200190c565b9150505b919050565b6001600160a01b031660009081526001602052604090205490565b6003546000906001600160a01b03163314620004045760405162461bcd60e51b8152600401620003fb9062001c91565b60405180910390fd5b8315620004495762000442876000815181106200041d57fe5b6020026020010151876000815181106200043357fe5b60200260200101518762000c0f565b5062000811565b62000469876000815181106200045b57fe5b602002602001015162001428565b620004885760405162461bcd60e51b8152600401620003fb9062001b5a565b6000620004c1886000815181106200049c57fe5b602002602001015188600081518110620004b257fe5b60200260200101518862000e4b565b905060006200050b89600181518110620004d757fe5b602002602001015189600181518110620004ed57fe5b60200260200101516040518060200160405280600081525062000e4b565b6004548a5191925060009182916001600160a01b0316908c9060029081106200053057fe5b6020026020010151600014156200073a57620005618c6000815181106200055357fe5b60200260200101516200140d565b915060608b6002815181106200057357fe5b602002602001015190508051600014620006ae576000826001600160a01b0316633e041fba8e600281518110620005a657fe5b60200260200101516040518263ffffffff1660e01b8152600401620005cc919062001b45565b60206040518083038186803b158015620005e557600080fd5b505afa158015620005fa573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190620006209190620017e4565b604051632d837c6160e21b81529091506001600160a01b0384169063b60df184906200065190849060040162001a14565b60206040518083038186803b1580156200066a57600080fd5b505afa1580156200067f573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190620006a591906200190c565b94505062000733565b604051632d837c6160e21b81526001600160a01b0383169063b60df18490620006dc90869060040162001a14565b60206040518083038186803b158015620006f557600080fd5b505afa1580156200070a573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906200073091906200190c565b93505b50620007fc565b6200074c8c6002815181106200055357fe5b91506001600160a01b038216620007775760405162461bcd60e51b8152600401620003fb9062001c24565b604051632d837c6160e21b81526001600160a01b0382169063b60df18490620007a590859060040162001a14565b60206040518083038186803b158015620007be57600080fd5b505afa158015620007d3573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190620007f991906200190c565b92505b6200080b8585858b8b6200145a565b50505050505b9695505050505050565b600060208181529181526040908190208054600180830180548551600261010094831615949094026000190190911692909204601f81018790048702830187019095528482526001600160a01b039092169492939092830182828015620008c65780601f106200089a57610100808354040283529160200191620008c6565b820191906000526020600020905b815481529060010190602001808311620008a857829003601f168201915b50505060028085018054604080516020601f60001961010060018716150201909416959095049283018590048502810185019091528181529596959450909250908301828280156200095c5780601f1062000930576101008083540402835291602001916200095c565b820191906000526020600020905b8154815290600101906020018083116200093e57829003601f168201915b5050506003840154600490940154929360ff808216946101008304821694506201000090920416915087565b60048054604051630e4b598760e21b81526001600160a01b0390911691829163392d661c91620009bd91879187910162001cd1565b600060405180830381600087803b158015620009d857600080fd5b505af1158015620009ed573d6000803e3d6000fd5b5050604051630da0459160e11b81526001600160a01b0384169250631b408b22915062000a1f90859060040162001a14565b60206040518083038186803b15801562000a3857600080fd5b505afa15801562000a4d573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019062000a739190620018d4565b62000adb5760405163b2852d5b60e01b81526001600160a01b0382169063b2852d5b9062000aa690859060040162001a14565b600060405180830381600087803b15801562000ac157600080fd5b505af115801562000ad6573d6000803e3d6000fd5b505050505b604051632d837c6160e21b81526000906001600160a01b0383169063b60df1849062000b0c90869060040162001a14565b60206040518083038186803b15801562000b2557600080fd5b505afa15801562000b3a573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019062000b6091906200190c565b60405163731133e960e01b81529091506001600160a01b0383169063731133e99062000b959033908590899060040162001a49565b600060405180830381600087803b15801562000bb057600080fd5b505af115801562000bc5573d6000803e3d6000fd5b50506040513392503091507f9ed053bb818ff08b8353cd46f78db1f0799f31c9e4458fdb425c10eccd2efc449062000c01908890869062001d1d565b60405180910390a350505050565b6003546000906001600160a01b0316331462000c3f5760405162461bcd60e51b8152600401620003fb9062001c91565b600062000c4e85858562000e4b565b60008681526020819052604090206003015490915062010000900460ff161562000c8c5760405162461bcd60e51b8152600401620003fb9062001be2565b6004805460405163b2852d5b60e01b81526001600160a01b0390911691829163b2852d5b9162000cbf9186910162001a14565b600060405180830381600087803b15801562000cda57600080fd5b505af115801562000cef573d6000803e3d6000fd5b5050604051632d837c6160e21b8152600092506001600160a01b038416915063b60df1849062000d2490869060040162001a14565b60206040518083038186803b15801562000d3d57600080fd5b505afa15801562000d52573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019062000d7891906200190c565b60055460405163731133e960e01b81529192506001600160a01b0384169163731133e99162000dae918791869160040162001a49565b600060405180830381600087803b15801562000dc957600080fd5b505af115801562000dde573d6000803e3d6000fd5b50505060008881526020819052604090819020600301805462ff0000191662010000179055517f4961d472d58630e3b00762a913896f28238a37ade193a20b953b7c5bebe6fce3915062000e36908590849062001b21565b60405180910390a150909150505b9392505050565b6002546000906001600160a01b0316331462000e7b5760405162461bcd60e51b8152600401620003fb9062001bab565b62000e868462001428565b156200103b5760008481526020818152604091829020600190810180548451600293821615610100026000190190911692909204601f810184900484028301840190945283825262000f3493879383018282801562000f295780601f1062000efd5761010080835404028352916020019162000f29565b820191906000526020600020905b81548152906001019060200180831162000f0b57829003601f168201915b50505050506200151a565b62000f6057600084815260208181526040909120845162000f5e9260019092019186019062001578565b505b600084815260208181526040918290206002908101805484516001821615610100026000190190911692909204601f810184900484028301840190945283825262000fd093869383018282801562000f295780601f1062000efd5761010080835404028352916020019162000f29565b6200101c5762000ff082604051806020016040528060008152506200151a565b6200101c5760008481526020818152604090912083516200101a9260029092019185019062001578565b505b506000838152602081905260409020546001600160a01b031662000e44565b620010488484846200125b565b905062000e44565b60016020526000908152604090205481565b6004805460405163865097c760e01b81526001600160a01b0390911691829163865097c7916200109791879187910162001cd1565b600060405180830381600087803b158015620010b257600080fd5b505af1158015620010c7573d6000803e3d6000fd5b5050604051632d837c6160e21b8152600092506001600160a01b038416915063b60df18490620010fc90869060040162001a14565b60206040518083038186803b1580156200111557600080fd5b505afa1580156200112a573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906200115091906200190c565b604051637a94c56560e11b81529091506001600160a01b0383169063f5298aca90620011859033908590899060040162001a28565b600060405180830381600087803b158015620011a057600080fd5b505af1158015620011b5573d6000803e3d6000fd5b50506040513092503391507f9ed053bb818ff08b8353cd46f78db1f0799f31c9e4458fdb425c10eccd2efc449062000c01908890869062001d1d565b6004805460405163061049c760e51b81526001600160a01b0390911691829163c20938e0916200109791879187910162001cd1565b6004805460405163645632a160e11b81526001600160a01b0390911691829163c8ac654291620009bd91879187910162001cd1565b6002546000906001600160a01b031633146200128b5760405162461bcd60e51b8152600401620003fb9062001bab565b6000306040516200129c90620015fd565b620012a8919062001a14565b604051809103906000f080158015620012c5573d6000803e3d6000fd5b509050620012d26200160b565b6001600160a01b038281168252604080830186905260208084018881526001606086018190526080860181905260008b815280845293909320855181546001600160a01b0319169516949094178455518051859493620013389390850192019062001578565b50604082015180516200135691600284019160209091019062001578565b506060820151600382018054608085015160a08601511515620100000262ff0000199115156101000261ff001995151560ff199094169390931794909416919091171691909117905560c0909101516004909101556001600160a01b03821660009081526001602052604090819020879055517f2110f11e9cd4b18ab6c5670c01ca1085e732da46972527b540260635174eb68590620013fc9088908590889062001ce8565b60405180910390a150949350505050565b6000908152602081905260409020546001600160a01b031690565b600081815260208190526040812060030154610100900460ff16156200145157506001620003ab565b506000620003ab565b60405163204562a560e21b81526001600160a01b038616906381158a949062001490908890889088908890889060040162001a79565b600060405180830381600087803b158015620014ab57600080fd5b505af1158015620014c0573d6000803e3d6000fd5b50505050836001600160a01b0316856001600160a01b03167f9ed053bb818ff08b8353cd46f78db1f0799f31c9e4458fdb425c10eccd2efc4484866040516200150b92919062001d1d565b60405180910390a35050505050565b6000816040516020016200152f9190620019f6565b6040516020818303038152906040528051906020012083604051602001620015589190620019f6565b604051602081830303815290604052805190602001201490505b92915050565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f10620015bb57805160ff1916838001178555620015eb565b82800160010185558215620015eb579182015b82811115620015eb578251825591602001919060010190620015ce565b50620015f992915062001657565b5090565b6107678062001dd083390190565b6040518060e0016040528060006001600160a01b031681526020016060815260200160608152602001600015158152602001600015158152602001600015158152602001600081525090565b6200031291905b80821115620015f957600081556001016200165e565b600082601f83011262001685578081fd5b81356200169c620016968262001d53565b62001d2b565b818152915060208083019084810160005b84811015620016da57620016c7888484358a010162001757565b84529282019290820190600101620016ad565b505050505092915050565b600082601f830112620016f6578081fd5b813562001707620016968262001d53565b8181529150602080830190848101818402860182018710156200172957600080fd5b60005b84811015620016da578135845292820192908201906001016200172c565b8035620015728162001dc0565b600082601f83011262001768578081fd5b813567ffffffffffffffff8111156200177f578182fd5b62001794601f8201601f191660200162001d2b565b9150808252836020828501011115620017ac57600080fd5b8060208401602084013760009082016020015292915050565b600060208284031215620017d7578081fd5b813562000e448162001da7565b600060208284031215620017f6578081fd5b815162000e448162001da7565b60008060008060008060c087890312156200181c578182fd5b863567ffffffffffffffff8082111562001834578384fd5b620018428a838b01620016e5565b9750602089013591508082111562001858578384fd5b620018668a838b0162001674565b965060408901359150808211156200187c578384fd5b6200188a8a838b0162001757565b95506200189b8a60608b016200174a565b94506080890135935060a0890135915080821115620018b8578283fd5b50620018c789828a0162001757565b9150509295509295509295565b600060208284031215620018e6578081fd5b815162000e448162001dc0565b60006020828403121562001905578081fd5b5035919050565b6000602082840312156200191e578081fd5b5051919050565b6000806040838503121562001938578182fd5b8235915060208301356200194c8162001da7565b809150509250929050565b6000806000606084860312156200196c578283fd5b83359250602084013567ffffffffffffffff808211156200198b578384fd5b620019998783880162001757565b93506040860135915080821115620019af578283fd5b50620019be8682870162001757565b9150509250925092565b60008151808452620019e281602086016020860162001d74565b601f01601f19169290920160200192915050565b6000825162001a0a81846020870162001d74565b9190910192915050565b6001600160a01b0391909116815260200190565b6001600160a01b039390931683526020830191909152604082015260600190565b6001600160a01b039390931683526020830191909152604082015260806060820181905260009082015260a00190565b6001600160a01b03868116825285166020820152604081018490526060810183905260a06080820181905260009062001ab590830184620019c8565b979650505050505050565b6001600160a01b038816815260e06020820181905260009062001ae690830189620019c8565b828103604084015262001afa8189620019c8565b96151560608401525050921515608084015290151560a083015260c0909101529392505050565b6001600160a01b03929092168252602082015260400190565b901515815260200190565b60006020825262000e446020830184620019c8565b60208082526031908201527f496e6974696174696e6720547769747465722075736572206973206e6f7420616040820152701021b93cb83a37b930bb32b9903ab9b2b960791b606082015260800190565b6020808252601f908201527f53656e646572206973206e6f74207468652075736572206d616e616765722e00604082015260600190565b60208082526022908201527f5573657220616c72656164792064726f70706564207468656972206372797074604082015261379760f11b606082015260800190565b60208082526047908201527f546869726420706172747920746f6b656e20676976656e2d2d7769746820757360408201527f65726e616d65206d6574686f642d2d646f6573206e6f7420657869737420696e6060820152662073797374656d60c81b608082015260a00190565b6020808252601a908201527f53656e646572206973206e6f7420746865206d616e616765722e000000000000604082015260600190565b90815260200190565b9182526001600160a01b0316602082015260400190565b8381526001600160a01b038316602082015260606040820181905260009062001d1490830184620019c8565b95945050505050565b918252602082015260400190565b60405181810167ffffffffffffffff8111828210171562001d4b57600080fd5b604052919050565b600067ffffffffffffffff82111562001d6a578081fd5b5060209081020190565b60005b8381101562001d9157818101518382015260200162001d77565b8381111562001da1576000848401525b50505050565b6001600160a01b038116811462001dbd57600080fd5b50565b801515811462001dbd57600080fdfe608060405234801561001057600080fd5b506040516107673803806107678339818101604052602081101561003357600080fd5b505161004e6301ffc9a760e01b6001600160e01b0361016316565b610067630271189760e51b6001600160e01b0361016316565b6000816001600160a01b0316631a679a4f6040518163ffffffff1660e01b815260040160206040518083038186803b1580156100a257600080fd5b505afa1580156100b6573d6000803e3d6000fd5b505050506040513d60208110156100cc57600080fd5b50516040805163a22cb46560e01b81526001600160a01b0385811660048301526001602483015291519293509083169163a22cb4659160448082019260009290919082900301818387803b15801561012357600080fd5b505af1158015610137573d6000803e3d6000fd5b5050600180546001600160a01b0319166001600160a01b039590951694909417909355506101e7915050565b6001600160e01b031980821614156101c2576040805162461bcd60e51b815260206004820152601c60248201527f4552433136353a20696e76616c696420696e7465726661636520696400000000604482015290519081900360640190fd5b6001600160e01b0319166000908152602081905260409020805460ff19166001179055565b610571806101f66000396000f3fe608060405234801561001057600080fd5b506004361061004c5760003560e01c806301ffc9a71461005157806381158a941461008c578063bc197c8114610157578063f23a6e611461029b575b600080fd5b6100786004803603602081101561006757600080fd5b50356001600160e01b03191661032e565b604080519115158252519081900360200190f35b610155600480360360a08110156100a257600080fd5b6001600160a01b03823581169260208101359091169160408201359160608101359181019060a081016080820135600160201b8111156100e157600080fd5b8201836020820111156100f357600080fd5b803590602001918460018302840111600160201b8311171561011457600080fd5b91908080601f01602080910402602001604051908101604052809392919081815260200183838082843760009201919091525092955061034d945050505050565b005b61027e600480360360a081101561016d57600080fd5b6001600160a01b038235811692602081013590911691810190606081016040820135600160201b8111156101a057600080fd5b8201836020820111156101b257600080fd5b803590602001918460208302840111600160201b831117156101d357600080fd5b919390929091602081019035600160201b8111156101f057600080fd5b82018360208201111561020257600080fd5b803590602001918460208302840111600160201b8311171561022357600080fd5b919390929091602081019035600160201b81111561024057600080fd5b82018360208201111561025257600080fd5b803590602001918460018302840111600160201b8311171561027357600080fd5b509092509050610515565b604080516001600160e01b03199092168252519081900360200190f35b61027e600480360360a08110156102b157600080fd5b6001600160a01b03823581169260208101359091169160408201359160608101359181019060a081016080820135600160201b8111156102f057600080fd5b82018360208201111561030257600080fd5b803590602001918460018302840111600160201b8311171561032357600080fd5b509092509050610529565b6001600160e01b03191660009081526020819052604090205460ff1690565b6001546001600160a01b031633146103ac576040805162461bcd60e51b815260206004820152601a60248201527f53656e646572206973206e6f7420746865206d616e616765722e000000000000604482015290519081900360640190fd5b60015460408051631a679a4f60e01b815290516000926001600160a01b031691631a679a4f916004808301926020929190829003018186803b1580156103f157600080fd5b505afa158015610405573d6000803e3d6000fd5b505050506040513d602081101561041b57600080fd5b5051604051637921219560e11b81526001600160a01b03888116600483019081528882166024840152604483018890526064830187905260a060848401908152865160a485015286519495509185169363f242432a938b938b938b938b938b939160c490910190602085019080838360005b838110156104a557818101518382015260200161048d565b50505050905090810190601f1680156104d25780820380516001836020036101000a031916815260200191505b509650505050505050600060405180830381600087803b1580156104f557600080fd5b505af1158015610509573d6000803e3d6000fd5b50505050505050505050565b63bc197c8160e01b98975050505050505050565b63f23a6e6160e01b969550505050505056fea2646970667358221220d53a0089bc746514aa6654be3944e5d4e151def6a95dcf763a01957243af52b364736f6c634300060a0033a26469706673582212209ca4c6da09a3719a69999ad43917a569ab883fe9d3f61a483a73c5441ff4cab264736f6c634300060a003360806040523480156200001157600080fd5b506040516200384338038062003843833981810160405260208110156200003757600080fd5b81019080805160405193929190846401000000008211156200005857600080fd5b9083019060208201858111156200006e57600080fd5b82516401000000008111828201881017156200008957600080fd5b82525081516020918201929091019080838360005b83811015620000b85781810151838201526020016200009e565b50505050905090810190601f168015620000e65780820380516001836020036101000a031916815260200191505b50604052508291506200010b90506301ffc9a760e01b6001600160e01b036200016f16565b6200011f816001600160e01b03620001f416565b6200013a636cdb3d1360e11b6001600160e01b036200016f16565b620001556303a24d0760e21b6001600160e01b036200016f16565b5050600580546001600160a01b03191633179055620002b2565b6001600160e01b03198082161415620001cf576040805162461bcd60e51b815260206004820152601c60248201527f4552433136353a20696e76616c696420696e7465726661636520696400000000604482015290519081900360640190fd5b6001600160e01b0319166000908152602081905260409020805460ff19166001179055565b8051620002099060039060208401906200020d565b5050565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106200025057805160ff191683800117855562000280565b8280016001018555821562000280579182015b828111156200028057825182559160200191906001019062000263565b506200028e92915062000292565b5090565b620002af91905b808211156200028e576000815560010162000299565b90565b61358180620002c26000396000f3fe60806040526004361061014a5760003560e01c8063731133e9116100b6578063c20938e01161006f578063c20938e014610d00578063c781df0114610d2c578063c8ac654214610ddd578063e985e9c514610e09578063f242432a14610e44578063f5298aca14610f1a5761014a565b8063731133e914610b1a5780637bf2e06014610be7578063865097c714610c33578063a22cb46514610c5f578063b2852d5b14610c9a578063b60df18414610ccd5761014a565b80632eb2c2d6116101085780632eb2c2d614610569578063392d661c146107375780633cc0cc9a146107635780633e041fba146107a95780634e1273f41461085a5780636b20c454146109da5761014a565b8062fdd58e1461014f57806301ffc9a71461019a5780630e89341c146101e2578063150b7a02146102815780631b408b221461036f5780631f7fdffa146103a2575b600080fd5b34801561015b57600080fd5b506101886004803603604081101561017257600080fd5b506001600160a01b038135169060200135610f59565b60408051918252519081900360200190f35b3480156101a657600080fd5b506101ce600480360360208110156101bd57600080fd5b50356001600160e01b031916610fc8565b604080519115158252519081900360200190f35b3480156101ee57600080fd5b5061020c6004803603602081101561020557600080fd5b5035610fe7565b6040805160208082528351818301528351919283929083019185019080838360005b8381101561024657818101518382015260200161022e565b50505050905090810190601f1680156102735780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34801561028d57600080fd5b50610352600480360360808110156102a457600080fd5b6001600160a01b03823581169260208101359091169160408201359190810190608081016060820135600160201b8111156102de57600080fd5b8201836020820111156102f057600080fd5b803590602001918460018302840111600160201b8311171561031157600080fd5b91908080601f01602080910402602001604051908101604052809392919081815260200183838082843760009201919091525092955061107f945050505050565b604080516001600160e01b03199092168252519081900360200190f35b34801561037b57600080fd5b506101ce6004803603602081101561039257600080fd5b50356001600160a01b031661108f565b3480156103ae57600080fd5b50610567600480360360808110156103c557600080fd5b6001600160a01b038235169190810190604081016020820135600160201b8111156103ef57600080fd5b82018360208201111561040157600080fd5b803590602001918460208302840111600160201b8311171561042257600080fd5b9190808060200260200160405190810160405280939291908181526020018383602002808284376000920191909152509295949360208101935035915050600160201b81111561047157600080fd5b82018360208201111561048357600080fd5b803590602001918460208302840111600160201b831117156104a457600080fd5b9190808060200260200160405190810160405280939291908181526020018383602002808284376000920191909152509295949360208101935035915050600160201b8111156104f357600080fd5b82018360208201111561050557600080fd5b803590602001918460018302840111600160201b8311171561052657600080fd5b91908080601f0160208091040260200160405190810160405280939291908181526020018383808284376000920191909152509295506110b0945050505050565b005b34801561057557600080fd5b50610567600480360360a081101561058c57600080fd5b6001600160a01b038235811692602081013590911691810190606081016040820135600160201b8111156105bf57600080fd5b8201836020820111156105d157600080fd5b803590602001918460208302840111600160201b831117156105f257600080fd5b9190808060200260200160405190810160405280939291908181526020018383602002808284376000920191909152509295949360208101935035915050600160201b81111561064157600080fd5b82018360208201111561065357600080fd5b803590602001918460208302840111600160201b8311171561067457600080fd5b9190808060200260200160405190810160405280939291908181526020018383602002808284376000920191909152509295949360208101935035915050600160201b8111156106c357600080fd5b8201836020820111156106d557600080fd5b803590602001918460018302840111600160201b831117156106f657600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600092019190915250929550611179945050505050565b6105676004803603604081101561074d57600080fd5b50803590602001356001600160a01b0316611472565b34801561076f57600080fd5b5061078d6004803603602081101561078657600080fd5b503561151e565b604080516001600160a01b039092168252519081900360200190f35b3480156107b557600080fd5b5061078d600480360360208110156107cc57600080fd5b810190602081018135600160201b8111156107e657600080fd5b8201836020820111156107f857600080fd5b803590602001918460018302840111600160201b8311171561081957600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600092019190915250929550611545945050505050565b34801561086657600080fd5b5061098a6004803603604081101561087d57600080fd5b810190602081018135600160201b81111561089757600080fd5b8201836020820111156108a957600080fd5b803590602001918460208302840111600160201b831117156108ca57600080fd5b9190808060200260200160405190810160405280939291908181526020018383602002808284376000920191909152509295949360208101935035915050600160201b81111561091957600080fd5b82018360208201111561092b57600080fd5b803590602001918460208302840111600160201b8311171561094c57600080fd5b9190808060200260200160405190810160405280939291908181526020018383602002808284376000920191909152509295506115b6945050505050565b60408051602080825283518183015283519192839290830191858101910280838360005b838110156109c65781810151838201526020016109ae565b505050509050019250505060405180910390f35b3480156109e657600080fd5b50610567600480360360608110156109fd57600080fd5b6001600160a01b038235169190810190604081016020820135600160201b811115610a2757600080fd5b820183602082011115610a3957600080fd5b803590602001918460208302840111600160201b83111715610a5a57600080fd5b9190808060200260200160405190810160405280939291908181526020018383602002808284376000920191909152509295949360208101935035915050600160201b811115610aa957600080fd5b820183602082011115610abb57600080fd5b803590602001918460208302840111600160201b83111715610adc57600080fd5b919080806020026020016040519081016040528093929190818152602001838360200280828437600092019190915250929550611734945050505050565b348015610b2657600080fd5b5061056760048036036080811015610b3d57600080fd5b6001600160a01b038235169160208101359160408201359190810190608081016060820135600160201b811115610b7357600080fd5b820183602082011115610b8557600080fd5b803590602001918460018302840111600160201b83111715610ba657600080fd5b91908080601f0160208091040260200160405190810160405280939291908181526020018383808284376000920191909152509295506117a8945050505050565b348015610bf357600080fd5b50610c1a60048036036020811015610c0a57600080fd5b50356001600160a01b0316611866565b6040805192835290151560208301528051918290030190f35b61056760048036036040811015610c4957600080fd5b50803590602001356001600160a01b0316611882565b348015610c6b57600080fd5b5061056760048036036040811015610c8257600080fd5b506001600160a01b03813516906020013515156118ed565b348015610ca657600080fd5b5061056760048036036020811015610cbd57600080fd5b50356001600160a01b03166119dc565b348015610cd957600080fd5b5061018860048036036020811015610cf057600080fd5b50356001600160a01b0316611abe565b61056760048036036040811015610d1657600080fd5b50803590602001356001600160a01b0316611ad9565b348015610d3857600080fd5b5061078d60048036036020811015610d4f57600080fd5b810190602081018135600160201b811115610d6957600080fd5b820183602082011115610d7b57600080fd5b803590602001918460018302840111600160201b83111715610d9c57600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600092019190915250929550611b2c945050505050565b61056760048036036040811015610df357600080fd5b50803590602001356001600160a01b0316611b52565b348015610e1557600080fd5b506101ce60048036036040811015610e2c57600080fd5b506001600160a01b0381358116916020013516611bf9565b348015610e5057600080fd5b50610567600480360360a0811015610e6757600080fd5b6001600160a01b03823581169260208101359091169160408201359160608101359181019060a081016080820135600160201b811115610ea657600080fd5b820183602082011115610eb857600080fd5b803590602001918460018302840111600160201b83111715610ed957600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600092019190915250929550611c27945050505050565b348015610f2657600080fd5b5061056760048036036060811015610f3d57600080fd5b506001600160a01b038135169060208101359060400135611df8565b60006001600160a01b038316610fa05760405162461bcd60e51b815260040180806020018281038252602b815260200180613341602b913960400191505060405180910390fd5b5060009081526001602090815260408083206001600160a01b03949094168352929052205490565b6001600160e01b03191660009081526020819052604090205460ff1690565b60038054604080516020601f60026000196101006001881615020190951694909404938401819004810282018101909252828152606093909290918301828280156110735780601f1061104857610100808354040283529160200191611073565b820191906000526020600020905b81548152906001019060200180831161105657829003601f168201915b50505050509050919050565b630a85bd0160e11b949350505050565b6001600160a01b031660009081526007602052604090206001015460ff1690565b6005546001600160a01b031633146110f95760405162461bcd60e51b81526004018080602001828103825260238152602001806133ea6023913960400191505060405180910390fd5b611101611e6c565b6001600160a01b0316846001600160a01b0316148061112c575061112c84611127611e6c565b611bf9565b6111675760405162461bcd60e51b81526004018080602001828103825260298152602001806133c16029913960400191505060405180910390fd5b61117384848484611e71565b50505050565b81518351146111b95760405162461bcd60e51b81526004018080602001828103825260288152602001806135036028913960400191505060405180910390fd5b6001600160a01b0384166111fe5760405162461bcd60e51b815260040180806020018281038252602581526020018061340d6025913960400191505060405180910390fd5b611206611e6c565b6001600160a01b0316856001600160a01b0316148061122c575061122c85611127611e6c565b6112675760405162461bcd60e51b81526004018080602001828103825260328152602001806134326032913960400191505060405180910390fd5b6000611271611e6c565b905061128181878787878761146a565b60005b845181101561138257600085828151811061129b57fe5b6020026020010151905060008583815181106112b357fe5b60200260200101519050611320816040518060600160405280602a8152602001613487602a91396001600086815260200190815260200160002060008d6001600160a01b03166001600160a01b03168152602001908152602001600020546120c69092919063ffffffff16565b60008381526001602090815260408083206001600160a01b038e811685529252808320939093558a1681522054611357908261215d565b60009283526001602081815260408086206001600160a01b038d168752909152909320555001611284565b50846001600160a01b0316866001600160a01b0316826001600160a01b03167f4a39dc06d4c0dbc64b70af90fd698a233a518aa5d07e595d983b8c0526c8f7fb8787604051808060200180602001838103835285818151815260200191508051906020019060200280838360005b838110156114085781810151838201526020016113f0565b50505050905001838103825284818151815260200191508051906020019060200280838360005b8381101561144757818101518382015260200161142f565b5050505090500194505050505060405180910390a461146a8187878787876121be565b505050505050565b6005546001600160a01b031633146114bb5760405162461bcd60e51b81526004018080602001828103825260238152602001806133ea6023913960400191505060405180910390fd5b6114c5828261244f565b6001600160a01b03811660009081526007602052604090206001015460ff166114f1576114f1816119dc565b60006114fc82611abe565b9050611519338285604051806020016040528060008152506117a8565b505050565b6006818154811061152b57fe5b6000918252602090912001546001600160a01b0316905081565b60006004826040518082805190602001908083835b602083106115795780518252601f19909201916020918201910161155a565b51815160209384036101000a60001901801990921691161790529201948552506040519384900301909220546001600160a01b0316949350505050565b606081518351146115f85760405162461bcd60e51b81526004018080602001828103825260298152602001806134da6029913960400191505060405180910390fd5b6060835167ffffffffffffffff8111801561161257600080fd5b5060405190808252806020026020018201604052801561163c578160200160208202803683370190505b50905060005b845181101561172c5760006001600160a01b031685828151811061166257fe5b60200260200101516001600160a01b031614156116b05760405162461bcd60e51b815260040180806020018281038252603181526020018061336c6031913960400191505060405180910390fd5b600160008583815181106116c057fe5b6020026020010151815260200190815260200160002060008683815181106116e457fe5b60200260200101516001600160a01b03166001600160a01b031681526020019081526020016000205482828151811061171957fe5b6020908102919091010152600101611642565b509392505050565b61173c611e6c565b6001600160a01b0316836001600160a01b03161480611762575061176283611127611e6c565b61179d5760405162461bcd60e51b81526004018080602001828103825260298152602001806133c16029913960400191505060405180910390fd5b611519838383612723565b6005546001600160a01b031633146117f15760405162461bcd60e51b81526004018080602001828103825260238152602001806133ea6023913960400191505060405180910390fd5b6117f9611e6c565b6001600160a01b0316846001600160a01b0316148061181f575061181f84611127611e6c565b61185a5760405162461bcd60e51b81526004018080602001828103825260298152602001806133c16029913960400191505060405180910390fd5b61117384848484612991565b6007602052600090815260409020805460019091015460ff1682565b6005546001600160a01b031633146118cb5760405162461bcd60e51b81526004018080602001828103825260238152602001806133ea6023913960400191505060405180910390fd5b6118d58282612a98565b60006118e082611abe565b9050611519338285612b4c565b816001600160a01b03166118ff611e6c565b6001600160a01b031614156119455760405162461bcd60e51b81526004018080602001828103825260298152602001806134b16029913960400191505060405180910390fd5b8060026000611952611e6c565b6001600160a01b03908116825260208083019390935260409182016000908120918716808252919093529120805460ff191692151592909217909155611996611e6c565b60408051841515815290516001600160a01b0392909216917f17307eab39ab6107e8899845ad3d59bd9653f200f220920489ca2b5937696c319181900360200190a35050565b6005546001600160a01b03163314611a255760405162461bcd60e51b81526004018080602001828103825260238152602001806133ea6023913960400191505060405180910390fd5b600680546001810182556000919091527ff652222313e28459528d920b65115c16c04f3efc82aaedc97be59f3f377c0d3f0180546001600160a01b0319166001600160a01b038316179055611a7861321f565b600654600019018152600160208083018281526001600160a01b039490941660009081526007909152604090209151825591519101805460ff1916911515919091179055565b6001600160a01b031660009081526007602052604090205490565b6005546001600160a01b03163314611b225760405162461bcd60e51b81526004018080602001828103825260238152602001806133ea6023913960400191505060405180910390fd5b6118d58282612c85565b80516020818301810180516004825292820191909301209152546001600160a01b031681565b6005546001600160a01b03163314611b9b5760405162461bcd60e51b81526004018080602001828103825260238152602001806133ea6023913960400191505060405180910390fd5b611ba58282612e6f565b6001600160a01b03811660009081526007602052604090206001015460ff16611bd157611bd1816119dc565b6000611bdc82611abe565b905061151933828560405180602001604052806000815250612991565b6001600160a01b03918216600090815260026020908152604080832093909416825291909152205460ff1690565b6001600160a01b038416611c6c5760405162461bcd60e51b815260040180806020018281038252602581526020018061340d6025913960400191505060405180910390fd5b611c74611e6c565b6001600160a01b0316856001600160a01b03161480611c9a5750611c9a85611127611e6c565b611cd55760405162461bcd60e51b81526004018080602001828103825260298152602001806133c16029913960400191505060405180910390fd5b6000611cdf611e6c565b9050611cff818787611cf088612f1a565b611cf988612f1a565b8761146a565b611d4c836040518060600160405280602a8152602001613487602a913960008781526001602090815260408083206001600160a01b038d168452909152902054919063ffffffff6120c616565b60008581526001602090815260408083206001600160a01b038b81168552925280832093909355871681522054611d83908461215d565b60008581526001602090815260408083206001600160a01b03808b168086529184529382902094909455805188815291820187905280518a8416938616927fc3d58168c5ae7397731d063d5bbf3d657854427343f4c083240f7aacaa2d0f6292908290030190a461146a818787878787612f5e565b611e00611e6c565b6001600160a01b0316836001600160a01b03161480611e265750611e2683611127611e6c565b611e615760405162461bcd60e51b81526004018080602001828103825260298152602001806133c16029913960400191505060405180910390fd5b611519838383612b4c565b335b90565b6001600160a01b038416611eb65760405162461bcd60e51b815260040180806020018281038252602181526020018061352b6021913960400191505060405180910390fd5b8151835114611ef65760405162461bcd60e51b81526004018080602001828103825260288152602001806135036028913960400191505060405180910390fd5b6000611f00611e6c565b9050611f118160008787878761146a565b60005b8451811015611fd557611f8c60016000878481518110611f3057fe5b602002602001015181526020019081526020016000206000886001600160a01b03166001600160a01b0316815260200190815260200160002054858381518110611f7657fe5b602002602001015161215d90919063ffffffff16565b60016000878481518110611f9c57fe5b602090810291909101810151825281810192909252604090810160009081206001600160a01b038b168252909252902055600101611f14565b50846001600160a01b031660006001600160a01b0316826001600160a01b03167f4a39dc06d4c0dbc64b70af90fd698a233a518aa5d07e595d983b8c0526c8f7fb8787604051808060200180602001838103835285818151815260200191508051906020019060200280838360005b8381101561205c578181015183820152602001612044565b50505050905001838103825284818151815260200191508051906020019060200280838360005b8381101561209b578181015183820152602001612083565b5050505090500194505050505060405180910390a46120bf816000878787876121be565b5050505050565b600081848411156121555760405162461bcd60e51b81526004018080602001828103825283818151815260200191508051906020019080838360005b8381101561211a578181015183820152602001612102565b50505050905090810190601f1680156121475780820380516001836020036101000a031916815260200191505b509250505060405180910390fd5b505050900390565b6000828201838110156121b7576040805162461bcd60e51b815260206004820152601b60248201527f536166654d6174683a206164646974696f6e206f766572666c6f770000000000604482015290519081900360640190fd5b9392505050565b6121d0846001600160a01b03166130e1565b1561146a57836001600160a01b031663bc197c8187878686866040518663ffffffff1660e01b815260040180866001600160a01b03166001600160a01b03168152602001856001600160a01b03166001600160a01b03168152602001806020018060200180602001848103845287818151815260200191508051906020019060200280838360005b83811015612270578181015183820152602001612258565b50505050905001848103835286818151815260200191508051906020019060200280838360005b838110156122af578181015183820152602001612297565b50505050905001848103825285818151815260200191508051906020019080838360005b838110156122eb5781810151838201526020016122d3565b50505050905090810190601f1680156123185780820380516001836020036101000a031916815260200191505b5098505050505050505050602060405180830381600087803b15801561233d57600080fd5b505af192505050801561236257506040513d602081101561235d57600080fd5b505160015b6123f75761236e61323c565b8061237957506123c0565b60405162461bcd60e51b815260206004820181815283516024840152835184939192839260440191908501908083836000831561211a578181015183820152602001612102565b60405162461bcd60e51b81526004018080602001828103825260348152602001806132e56034913960400191505060405180910390fd5b6001600160e01b0319811663bc197c8160e01b146124465760405162461bcd60e51b81526004018080602001828103825260288152602001806133196028913960400191505060405180910390fd5b50505050505050565b6001600160a01b0381166124e9578134146124a4576040805162461bcd60e51b815260206004820152601060248201526f1a5b98dbdc9c9958dd08185b5bdd5b9d60821b604482015290519081900360640190fd5b6040805183815290516001600160a01b0383169133917fe31c7b8d08ee7db0afa68782e1028ef92305caeea8626633ad44d413e30f6b2f9181900360200190a361271f565b604080516323b872dd60e01b815233600482015230602482015260448101849052905182916001600160a01b038316916323b872dd916064808201926020929091908290030181600087803b15801561254157600080fd5b505af1158015612555573d6000803e3d6000fd5b505050506040513d602081101561256b57600080fd5b50516125b0576040805162461bcd60e51b815260206004820152600f60248201526e1d1c985b9cd9995c8819985a5b1959608a1b604482015290519081900360640190fd5b6126dd816001600160a01b03166395d89b416040518163ffffffff1660e01b815260040160006040518083038186803b1580156125ec57600080fd5b505afa158015612600573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f19168201604052602081101561262957600080fd5b8101908080516040519392919084600160201b82111561264857600080fd5b90830190602082018581111561265d57600080fd5b8251600160201b81118282018810171561267657600080fd5b82525081516020918201929091019080838360005b838110156126a357818101518382015260200161268b565b50505050905090810190601f1680156126d05780820380516001836020036101000a031916815260200191505b506040525050508361311d565b6040805184815290516001600160a01b0384169133917fe31c7b8d08ee7db0afa68782e1028ef92305caeea8626633ad44d413e30f6b2f9181900360200190a3505b5050565b6001600160a01b0383166127685760405162461bcd60e51b81526004018080602001828103825260238152602001806134646023913960400191505060405180910390fd5b80518251146127a85760405162461bcd60e51b81526004018080602001828103825260288152602001806135036028913960400191505060405180910390fd5b60006127b2611e6c565b90506127d28185600086866040518060200160405280600081525061146a565b60005b83518110156128b0576128678382815181106127ed57fe5b602002602001015160405180606001604052806024815260200161339d602491396001600088868151811061281e57fe5b602002602001015181526020019081526020016000206000896001600160a01b03166001600160a01b03168152602001908152602001600020546120c69092919063ffffffff16565b6001600086848151811061287757fe5b602090810291909101810151825281810192909252604090810160009081206001600160a01b038a1682529092529020556001016127d5565b5060006001600160a01b0316846001600160a01b0316826001600160a01b03167f4a39dc06d4c0dbc64b70af90fd698a233a518aa5d07e595d983b8c0526c8f7fb8686604051808060200180602001838103835285818151815260200191508051906020019060200280838360005b8381101561293757818101518382015260200161291f565b50505050905001838103825284818151815260200191508051906020019060200280838360005b8381101561297657818101518382015260200161295e565b5050505090500194505050505060405180910390a450505050565b6001600160a01b0384166129d65760405162461bcd60e51b815260040180806020018281038252602181526020018061352b6021913960400191505060405180910390fd5b60006129e0611e6c565b90506129f281600087611cf088612f1a565b60008481526001602090815260408083206001600160a01b0389168452909152902054612a25908463ffffffff61215d16565b60008581526001602090815260408083206001600160a01b03808b16808652918452828520959095558151898152928301889052815190948616927fc3d58168c5ae7397731d063d5bbf3d657854427343f4c083240f7aacaa2d0f6292908290030190a46120bf81600087878787612f5e565b60408051632142170760e11b815230600482015233602482015260448101849052905182916001600160a01b038316916342842e0e9160648082019260009290919082900301818387803b158015612aef57600080fd5b505af1158015612b03573d6000803e3d6000fd5b50506040805186815290516001600160a01b03861693503392507f56c54ba9bd38d8fd62012e42c7ee564519b09763c426d331b3661b537ead19b29181900360200190a3505050565b6001600160a01b038316612b915760405162461bcd60e51b81526004018080602001828103825260238152602001806134646023913960400191505060405180910390fd5b6000612b9b611e6c565b9050612bcb81856000612bad87612f1a565b612bb687612f1a565b6040518060200160405280600081525061146a565b612c188260405180606001604052806024815260200161339d6024913960008681526001602090815260408083206001600160a01b038b168452909152902054919063ffffffff6120c616565b60008481526001602090815260408083206001600160a01b03808a16808652918452828520959095558151888152928301879052815193949093908616927fc3d58168c5ae7397731d063d5bbf3d657854427343f4c083240f7aacaa2d0f6292908290030190a450505050565b6001600160a01b038116612d6957604051600090339084908381818185875af1925050503d8060008114612cd5576040519150601f19603f3d011682016040523d82523d6000602084013e612cda565b606091505b5050905080612d23576040805162461bcd60e51b815260206004820152601060248201526f2a3930b739b332b9103330b4b632b21760811b604482015290519081900360640190fd5b6040805184815290516001600160a01b0384169133917f56c54ba9bd38d8fd62012e42c7ee564519b09763c426d331b3661b537ead19b29181900360200190a35061271f565b6040805163a9059cbb60e01b815233600482015260248101849052905182916001600160a01b0383169163a9059cbb916044808201926020929091908290030181600087803b158015612dbb57600080fd5b505af1158015612dcf573d6000803e3d6000fd5b505050506040513d6020811015612de557600080fd5b5051612e2a576040805162461bcd60e51b815260206004820152600f60248201526e1d1c985b9cd9995c8819985a5b1959608a1b604482015290519081900360640190fd5b6040805184815290516001600160a01b0384169133917f56c54ba9bd38d8fd62012e42c7ee564519b09763c426d331b3661b537ead19b29181900360200190a3505050565b60408051632142170760e11b815233600482015230602482015260448101849052905182916001600160a01b038316916342842e0e9160648082019260009290919082900301818387803b158015612ec657600080fd5b505af1158015612eda573d6000803e3d6000fd5b505050506126dd816001600160a01b03166395d89b416040518163ffffffff1660e01b815260040160006040518083038186803b1580156125ec57600080fd5b604080516001808252818301909252606091829190602080830190803683370190505090508281600081518110612f4d57fe5b602090810291909101015292915050565b612f70846001600160a01b03166130e1565b1561146a57836001600160a01b031663f23a6e6187878686866040518663ffffffff1660e01b815260040180866001600160a01b03166001600160a01b03168152602001856001600160a01b03166001600160a01b0316815260200184815260200183815260200180602001828103825283818151815260200191508051906020019080838360005b83811015613011578181015183820152602001612ff9565b50505050905090810190601f16801561303e5780820380516001836020036101000a031916815260200191505b509650505050505050602060405180830381600087803b15801561306157600080fd5b505af192505050801561308657506040513d602081101561308157600080fd5b505160015b6130925761236e61323c565b6001600160e01b0319811663f23a6e6160e01b146124465760405162461bcd60e51b81526004018080602001828103825260288152602001806133196028913960400191505060405180910390fd5b6000813f7fc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a47081811480159061311557508115155b949350505050565b60006001600160a01b03166004836040518082805190602001908083835b6020831061315a5780518252601f19909201916020918201910161313b565b51815160209384036101000a60001901801990921691161790529201948552506040519384900301909220546001600160a01b03169290921415915061271f905057806004836040518082805190602001908083835b602083106131cf5780518252601f1990920191602091820191016131b0565b51815160209384036101000a6000190180199092169116179052920194855250604051938490030190922080546001600160a01b0319166001600160a01b03949094169390931790925550505050565b604080518082019091526000808252602082015290565b60e01c90565b600060443d101561324c57611e6e565b600481823e6308c379a06132608251613236565b1461326a57611e6e565b6040513d600319016004823e80513d67ffffffffffffffff816024840111818411171561329a5750505050611e6e565b828401915081519250808311156132b45750505050611e6e565b503d830160208383010111156132cc57505050611e6e565b601f91909101601f191681016020016040529150509056fe455243313135353a207472616e7366657220746f206e6f6e2045524331313535526563656976657220696d706c656d656e746572455243313135353a204552433131353552656365697665722072656a656374656420746f6b656e73455243313135353a2062616c616e636520717565727920666f7220746865207a65726f2061646472657373455243313135353a2062617463682062616c616e636520717565727920666f7220746865207a65726f2061646472657373455243313135353a206275726e20616d6f756e7420657863656564732062616c616e6365455243313135353a2063616c6c6572206973206e6f74206f776e6572206e6f7220617070726f76656453656e646572206973206e6f7420746865206d616e6167657220636f6e74726163742e455243313135353a207472616e7366657220746f20746865207a65726f2061646472657373455243313135353a207472616e736665722063616c6c6572206973206e6f74206f776e6572206e6f7220617070726f766564455243313135353a206275726e2066726f6d20746865207a65726f2061646472657373455243313135353a20696e73756666696369656e742062616c616e636520666f72207472616e73666572455243313135353a2073657474696e6720617070726f76616c2073746174757320666f722073656c66455243313135353a206163636f756e747320616e6420696473206c656e677468206d69736d61746368455243313135353a2069647320616e6420616d6f756e7473206c656e677468206d69736d61746368455243313135353a206d696e7420746f20746865207a65726f2061646472657373a2646970667358221220f2ecc25a1a2a5fe8dd3b336039d500af5e09cda5c8da9fd81429e638fa47094964736f6c634300060a0033',

    abi: [
  {
    "inputs": [
      {
        "internalType": "string",
        "name": "_uri",
        "type": "string"
      },
      {
        "internalType": "address",
        "name": "_cryptoravesTokenAddr",
        "type": "address"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "constructor"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": false,
        "internalType": "address",
        "name": "user",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "tokenId",
        "type": "uint256"
      }
    ],
    "name": "CryptoDropped",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "_userId",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "address",
        "name": "_address",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "string",
        "name": "imageUrl",
        "type": "string"
      }
    ],
    "name": "NewUser",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "_from",
        "type": "address"
      },
      {
        "indexed": true,
        "internalType": "address",
        "name": "_to",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "_value",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "_tokenId",
        "type": "uint256"
      }
    ],
    "name": "Transfer",
    "type": "event"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "_amount",
        "type": "uint256"
      },
      {
        "internalType": "address",
        "name": "_token",
        "type": "address"
      }
    ],
    "name": "depositERC20",
    "outputs": [],
    "stateMutability": "payable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "_tokenId",
        "type": "uint256"
      },
      {
        "internalType": "address",
        "name": "_token",
        "type": "address"
      }
    ],
    "name": "depositERC721",
    "outputs": [],
    "stateMutability": "payable",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "getCryptoravesTokenAddress",
    "outputs": [
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "_platformId",
        "type": "uint256"
      }
    ],
    "name": "getTokenIdFromPlatformId",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "_userId",
        "type": "uint256"
      }
    ],
    "name": "getUserAccount",
    "outputs": [
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "_account",
        "type": "address"
      }
    ],
    "name": "getUserId",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256[]",
        "name": "_twitterIds",
        "type": "uint256[]"
      },
      {
        "internalType": "string[]",
        "name": "_twitterNames",
        "type": "string[]"
      },
      {
        "internalType": "string",
        "name": "_fromImageUrl",
        "type": "string"
      },
      {
        "internalType": "bool",
        "name": "_isLaunch",
        "type": "bool"
      },
      {
        "internalType": "uint256",
        "name": "_value",
        "type": "uint256"
      },
      {
        "internalType": "bytes",
        "name": "_data",
        "type": "bytes"
      }
    ],
    "name": "initCommand",
    "outputs": [
      {
        "internalType": "bool",
        "name": "",
        "type": "bool"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "_platformUserId",
        "type": "uint256"
      },
      {
        "internalType": "string",
        "name": "_twitterHandleFrom",
        "type": "string"
      },
      {
        "internalType": "string",
        "name": "_imageUrl",
        "type": "string"
      }
    ],
    "name": "initCryptoDrop",
    "outputs": [
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "_userId",
        "type": "uint256"
      },
      {
        "internalType": "string",
        "name": "_twitterHandleFrom",
        "type": "string"
      },
      {
        "internalType": "string",
        "name": "_imageUrl",
        "type": "string"
      }
    ],
    "name": "launchL2Account",
    "outputs": [
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "_platformUserId",
        "type": "uint256"
      },
      {
        "internalType": "string",
        "name": "_twitterHandle",
        "type": "string"
      },
      {
        "internalType": "string",
        "name": "_imageUrl",
        "type": "string"
      }
    ],
    "name": "userAccountCheck",
    "outputs": [
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      }
    ],
    "name": "userAccounts",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "name": "users",
    "outputs": [
      {
        "internalType": "address",
        "name": "account",
        "type": "address"
      },
      {
        "internalType": "string",
        "name": "twitterHandle",
        "type": "string"
      },
      {
        "internalType": "string",
        "name": "imageUrl",
        "type": "string"
      },
      {
        "internalType": "bool",
        "name": "isManaged",
        "type": "bool"
      },
      {
        "internalType": "bool",
        "name": "isUser",
        "type": "bool"
      },
      {
        "internalType": "bool",
        "name": "dropped",
        "type": "bool"
      },
      {
        "internalType": "uint256",
        "name": "tokenId",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "_amount",
        "type": "uint256"
      },
      {
        "internalType": "address",
        "name": "_token",
        "type": "address"
      }
    ],
    "name": "withdrawERC20",
    "outputs": [],
    "stateMutability": "payable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "_tokenId",
        "type": "uint256"
      },
      {
        "internalType": "address",
        "name": "_token",
        "type": "address"
      }
    ],
    "name": "withdrawERC721",
    "outputs": [],
    "stateMutability": "payable",
    "type": "function"
  }
]
    }
  }
}
</script>

<style>
.container {
  margin: 0 auto;
  min-height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  text-align: center;
}

.title {
  font-family: 'Quicksand', 'Source Sans Pro', -apple-system, BlinkMacSystemFont,
    'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  display: block;
  font-weight: 300;
  font-size: 100px;
  color: #35495e;
  letter-spacing: 1px;
}

.subtitle {
  font-weight: 300;
  font-size: 42px;
  color: #526488;
  word-spacing: 5px;
  padding-bottom: 15px;
}

.links {
  padding-top: 15px;
}

a:hover {
  cursor: pointer;
  color: blue;
  font-weight: bold;
}
</style>
